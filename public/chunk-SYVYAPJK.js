import{a as me,b as Ke,c as Qe,d as et,e as tt,f as pe,g as it,h as nt,i as ot}from"./chunk-4MMUSNXM.js";import{a as ce,b as le}from"./chunk-QYQ7TVED.js";import{$ as J,$a as Re,A as q,B as d,D as m,Da as w,E as I,F as a,Fa as ie,G as o,H as _,Ha as ne,I as y,Ia as oe,J as E,K as b,Ka as P,L as u,M as p,Ma as j,N as he,Na as we,P as ye,Q as r,Qa as Pe,R as D,Ra as Ie,S as T,Sa as ae,T as O,Ta as Oe,Ua as Fe,V,Va as ke,W as N,Wa as Ae,X as R,Xa as Ve,Ya as Ne,Z as G,Za as re,_ as X,ab as je,bb as Le,cb as ze,da as Y,db as He,ea as Z,eb as $e,fa as S,fb as Ue,ga as K,gb as Be,h as W,ha as Ee,hb as We,ib as qe,kb as Ge,la as De,lb as Xe,lc as L,m as h,mb as M,n as C,pa as Ce,pb as Je,qa as Q,qb as be,rb as Ye,sa as ee,tb as $,ub as Ze,v as A,vb as se,w as c,wa as te,y as f,z as v}from"./chunk-LPY2TOTA.js";import"./chunk-FK6H3RFT.js";import{a as xe,b as Te,g}from"./chunk-RA2WU32H.js";var Se=i=>({seleccionado:i});function ut(i,t){if(i&1){let e=b();a(0,"button",5),u("click",function(){let s=h(e).$implicit,l=p();return C(l.seleccionarEspecialidad(s))}),_(1,"img",6),o()}if(i&2){let e=t.$implicit,n=p();m("ngClass",G(3,Se,n.especialidadSeleccionada===e)),c(),he("alt",e),m("src","../../../../assets/especialidades/"+(n.tieneImagenEspecialidad(e)?e+".png":"defaultEspecialidada.png"),A)}}function ft(i,t){if(i&1){let e=b();a(0,"button",8),u("click",function(){let s=h(e).$implicit,l=p(2);return C(l.seleccionarProfesional(s))}),a(1,"span"),r(2),o(),_(3,"img",6),o()}if(i&2){let e=t.$implicit,n=p(2);m("ngClass",G(5,Se,n.especialistaSeleccionado===e)),c(2),O("",e.nombre," ",e.apellido,""),c(),he("alt",e.nombre),m("src",e.imagenUrl||"../../../../assets/imagenes/defaultPerfil.png",A)}}function gt(i,t){if(i&1&&(a(0,"div",2)(1,"h2"),r(2),o(),d(3,ft,4,7,"button",7),o()),i&2){let e=p();c(2),T("Especialista ",e.especialidadSeleccionada,""),c(),m("ngForOf",e.especialistasFiltrados)}}function _t(i,t){if(i&1){let e=b();a(0,"button",10),u("click",function(){let s=h(e).$implicit,l=p(2);return C(l.seleccionarFecha(s))}),r(1),o()}if(i&2){let e=t.$implicit,n=p(2);m("ngClass",G(2,Se,n.fechaSeleccionada===e)),c(),T(" ",e," ")}}function ht(i,t){if(i&1&&(a(0,"div",2)(1,"h2"),r(2,"Fechas disponibles"),o(),d(3,_t,2,4,"button",9),o()),i&2){let e=p();c(3),m("ngForOf",e.fechasDisponibles)}}function Ct(i,t){i&1&&(a(0,"span"),r(1,"(Ocupado)"),o())}function bt(i,t){if(i&1){let e=b();a(0,"button",12),u("click",function(){let s=h(e).$implicit,l=p(2);return C(l.reservarTurno(l.fechaSeleccionada,s.hora))}),r(1),d(2,Ct,2,0,"span",13),o()}if(i&2){let e=t.$implicit;m("disabled",e.estado==="ocupado"),c(),T(" ",e.hora," "),c(),m("ngIf",e.estado==="ocupado")}}function vt(i,t){if(i&1&&(a(0,"div",2)(1,"h2"),r(2,"Horarios disponibles"),o(),d(3,bt,3,3,"button",11),o()),i&2){let e=p();c(3),m("ngForOf",e.horariosDisponibles)}}var z=class i{constructor(t,e,n,s){this.turnosService=t;this.toastService=e;this.usuariosService=n;this.auth=s}especialidades=[""];especialidadSeleccionada="";especialistasFiltrados=[];especialistaSeleccionado;fechasDisponibles=[];fechaSeleccionada="";horariosDisponibles=[];usuarioLogueado=null;pacientes;pacienteSeleccionado;ngOnInit(){this.auth.usuario$.subscribe(t=>{t?this.usuarioLogueado=t:this.usuarioLogueado={rol:"no-registrado"}}),this.cargarListaEspecialidades()}cargarListaEspecialidades(){return g(this,null,function*(){this.especialidades=yield this.usuariosService.obtenerEspecialidadesUnicas()})}tieneImagenEspecialidad(t){return console.log("tieneImagenEspecialidad"),console.log(t),["Cardiolog\xEDa","Pediatr\xEDa","Dermatolog\xEDa"].includes(t)}seleccionarEspecialidad(t){this.especialidadSeleccionada=t,this.cargarEspecialistas(),this.especialistaSeleccionado=null,this.fechaSeleccionada="",this.fechasDisponibles=[],this.horariosDisponibles=[]}seleccionarProfesional(t){this.especialistaSeleccionado=t,this.cargarFechasDisponibles(),this.fechaSeleccionada="",this.horariosDisponibles=[]}cargarEspecialistas(){this.especialistaSeleccionado=null,this.fechaSeleccionada="",this.fechasDisponibles=[],this.horariosDisponibles=[],this.usuariosService.getUsuarios().subscribe(t=>{this.especialistasFiltrados=t.filter(e=>e.rol==="especialista"&&e.aprobado&&e.especialidades.includes(this.especialidadSeleccionada))})}generarHorarios(t){let e=t.disponibilidad?.horarios||[],n=[];for(let s of e){let[l,x]=s.replace(".",":").split(" a "),[k,H]=l.split(":").map(Number),[Me,lt]=x.split(":").map(Number);for(;k<Me||k===Me&&H<lt;)n.push(`${k.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`),H+=30,H===60&&(H=0,k++)}return n}cargarFechasDisponibles(){this.horariosDisponibles=[],this.fechaSeleccionada="",this.fechasDisponibles=[],console.log("ESPECIALISTA SELECCIONADO"),console.log(this.especialistaSeleccionado),console.log(this.especialistaSeleccionado.disponibilidad);let t=this.especialistaSeleccionado.disponibilidad;if(!t||!Array.isArray(t.dias)||t.dias.length===0||!Array.isArray(t.horarios)||t.horarios.length===0){this.toastService.mostrarMensaje("El especialista no tiene horarios/d\xEDas disponibles","Solicitud turnos","info");return}let e=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],n=new Date,s=1;switch(t.dias.length){case 1:s=3;break;case 2:s=5;break;case 3:s=7;break;case 4:s=9;break;case 5:s=11;break;case 6:s=13;break}console.log("dias leght: "+t.dias.length),console.log("for contador: "+s),console.log("for contador multipli: "+(2+(t.dias.length+t.dias.length-1)));for(let l=0;this.fechasDisponibles.length<s;l++){let x=new Date;x.setDate(n.getDate()+l);let k=e[x.getDay()];t.dias.includes(k)&&this.fechasDisponibles.push(x.toISOString().split("T")[0])}console.log("FECHAS CARGADAS:"),console.log(this.fechasDisponibles)}seleccionarFecha(t){return g(this,null,function*(){this.fechaSeleccionada=t;let e=this.generarHorarios(this.especialistaSeleccionado),s=(yield Promise.all(e.map(l=>g(this,null,function*(){return(yield this.turnosService.verificarDisponibilidad(this.especialistaSeleccionado.uid,t,l))?l:null})))).filter(l=>l!==null);this.horariosDisponibles=s.map(l=>({hora:l,estado:"disponible"})),console.log("Horarios disponibles:",this.horariosDisponibles)})}get puedeConfirmarTurno(){return!!this.fechaSeleccionada&&this.horariosDisponibles.some(t=>t.estado==="disponible")}getPrimerHorarioDisponible(){let t=this.horariosDisponibles.find(e=>e.estado==="disponible");return t?t.hora:""}reservarTurno(t,e){return g(this,null,function*(){if(!this.especialidadSeleccionada||!this.especialistaSeleccionado||!t||!e){this.toastService.mostrarMensaje("Faltan datos obligatorios para reservar el turno.","Reserva de turno","error");return}if(!(yield this.turnosService.verificarDisponibilidad(this.especialistaSeleccionado.uid,t,e))){this.toastService.mostrarMensaje("Horario ocupado","Ese turno ya fue solicitado.","info");return}let s={especialidad:this.especialidadSeleccionada,fechaTurno:t,fechaSolicictado:new Date,hora:e,estado:"pendiente",especialistaUid:this.especialistaSeleccionado.uid,especialistaNombre:this.especialistaSeleccionado.nombre,especialistaApellido:this.especialistaSeleccionado.apellido,especialistaDni:this.especialistaSeleccionado.dni,pacienteUid:this.usuarioLogueado.uid,pacienteNombre:this.usuarioLogueado.nombre,pacienteApellido:this.usuarioLogueado.apellido,pacienteDni:this.usuarioLogueado.dni,obraSocial:this.usuarioLogueado.obraSocial};yield this.turnosService.guardarTurno(s),this.toastService.mostrarMensaje("\xC9xito","Turno reservado correctamente.","success")})}static \u0275fac=function(e){return new(e||i)(f(pe),f(le),f(ce),f(L))};static \u0275cmp=v({type:i,selectors:[["app-solicitar-turno"]],decls:10,vars:4,consts:[[1,"form-card"],[1,"titulo"],[1,"grid-botones"],["mat-button","","class","boton-imagen",3,"ngClass","click",4,"ngFor","ngForOf"],["class","grid-botones",4,"ngIf"],["mat-button","",1,"boton-imagen",3,"click","ngClass"],[3,"src","alt"],["mat-button","","class","boton-imagen-vertical",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-button","",1,"boton-imagen-vertical",3,"click","ngClass"],["mat-raised-button","","class","boton-texto",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"boton-texto",3,"click","ngClass"],["mat-raised-button","","class","boton-texto",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"boton-texto",3,"click","disabled"],[4,"ngIf"]],template:function(e,n){e&1&&(a(0,"mat-card",0)(1,"h2",1),r(2,"Solicitar Nuevo Turno"),o(),a(3,"div",2)(4,"h2"),r(5,"Especialidades"),o(),d(6,ut,2,5,"button",3),o(),d(7,gt,4,2,"div",4)(8,ht,4,1,"div",4)(9,vt,4,1,"div",4),o()),e&2&&(c(6),m("ngForOf",n.especialidades),c(),m("ngIf",n.especialistasFiltrados.length>0),c(),m("ngIf",n.fechasDisponibles.length>0),c(),m("ngIf",n.horariosDisponibles.length>0))},dependencies:[M,P,j,Z,S,w,Y],styles:[".grid-botones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;justify-content:center}.titulo[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px;color:#1a237e;font-weight:700}.boton-imagen[_ngcontent-%COMP%]{width:120px;height:80px;padding:0;border-radius:8px;overflow:hidden;background-color:#fff;border:2px solid transparent}.boton-imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.boton-imagen.seleccionado[_ngcontent-%COMP%]{border-color:#3f51b5}.boton-imagen-vertical[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:120px;height:140px;padding:.5rem;background-color:#fff;border:2px solid transparent;border-radius:8px}.boton-imagen-vertical[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;margin-bottom:.3rem}.boton-imagen-vertical[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:6px}.boton-imagen-vertical.seleccionado[_ngcontent-%COMP%]{border-color:#3f51b5}.boton-texto[_ngcontent-%COMP%]{min-width:100px;border-radius:8px}.boton-texto.seleccionado[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.grid-botones[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:1rem;font-weight:600}"]})};function Tt(i,t){if(i&1&&(a(0,"mat-option",10),r(1),o()),i&2){let e=t.$implicit;m("value",e),c(),D(e)}}function yt(i,t){if(i&1){let e=b();a(0,"button",11),u("click",function(){h(e);let s=p();return C(s.confirmar())}),r(1,"Enviar"),o()}}var B=class i{constructor(t,e,n){this.service=t;this.dialogRef=e;this.data=n}modoVisualizacion=!1;encuesta={ambiente:"",comentario:"",volveria:""};opciones=["Excelente","Bueno","Regular","Malo"];ngOnInit(){return g(this,null,function*(){if(this.data?.modo==="ver"){this.modoVisualizacion=!0;let t=yield this.service.obtenerEncuesta(this.data.id);this.encuesta=t}})}confirmar(){return g(this,null,function*(){if(!this.encuesta.ambiente||!this.encuesta.volveria||!this.encuesta.comentario)return;let t=yield this.service.guardarEncuesta(this.encuesta);this.dialogRef.close(t)})}static \u0275fac=function(e){return new(e||i)(f(me),f(Pe),f(Ie))};static \u0275cmp=v({type:i,selectors:[["app-modal-encuesta"]],decls:23,vars:8,consts:[["mat-dialog-title",""],["appearance","outline",1,"full-width"],[3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"ngModelChange","ngModel","readonly"],["value","S\xED"],["value","No"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){e&1&&(a(0,"h2",0),r(1,"Encuesta de Satisfacci\xF3n"),o(),a(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),r(5,"\xBFC\xF3mo calificar\xEDas el ambiente de la cl\xEDnica?"),o(),a(6,"mat-select",2),R("ngModelChange",function(l){return N(n.encuesta.ambiente,l)||(n.encuesta.ambiente=l),l}),d(7,Tt,2,2,"mat-option",3),o()(),a(8,"mat-form-field",1)(9,"mat-label"),r(10,"Escribe un comentario"),o(),a(11,"textarea",4),R("ngModelChange",function(l){return N(n.encuesta.comentario,l)||(n.encuesta.comentario=l),l}),o()(),a(12,"mat-label"),r(13,"\xBFVolver\xEDas a atenderte?"),o(),a(14,"mat-radio-group",2),R("ngModelChange",function(l){return N(n.encuesta.volveria,l)||(n.encuesta.volveria=l),l}),a(15,"mat-radio-button",5),r(16,"S\xED"),o(),a(17,"mat-radio-button",6),r(18,"No"),o()()(),a(19,"mat-dialog-actions",7)(20,"button",8),r(21,"Cerrar"),o(),d(22,yt,2,0,"button",9),o()),e&2&&(c(6),V("ngModel",n.encuesta.ambiente),m("disabled",n.modoVisualizacion),c(),m("ngForOf",n.opciones),c(4),V("ngModel",n.encuesta.comentario),m("readonly",n.modoVisualizacion),c(3),V("ngModel",n.encuesta.volveria),m("disabled",n.modoVisualizacion),c(8),m("ngIf",!n.modoVisualizacion))},dependencies:[M,Ge,Xe,oe,ne,ie,P,Oe,Fe,Ae,ke,Ne,Ve,w,Q,ee,te,Z,S],encapsulation:2})};function Et(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F4C5} Fecha Solicitud"),o())}function Dt(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit,n=p();c(),D(n.formatearFecha(e.fechaSolicictado))}}function wt(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F4AC} Mensaje"),o())}function Pt(i,t){i&1&&(a(0,"td",23),r(1,"Se solicita un nuevo turno"),o())}function It(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F553} Fecha Turno"),o())}function Ot(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit;c(),O("",e.fechaTurno," ",e.hora,"")}}function Ft(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F464} Especialista"),o())}function kt(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit;c(),O("",e.especialistaNombre," ",e.especialistaApellido,"")}}function At(i,t){i&1&&(a(0,"th",22),r(1,"\u{1FA7A} Especialidad"),o())}function Vt(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit;c(),D(e.especialidad)}}function Nt(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F4CC} Estado"),o())}function Rt(i,t){if(i&1&&(a(0,"td",23)(1,"span",24),r(2),X(3,"titlecase"),o()()),i&2){let e=t.$implicit;c(),m("ngClass",e.estado),c(),D(J(3,2,e.estado))}}function jt(i,t){i&1&&(a(0,"th",22),r(1,"\u2699 Acciones"),o())}function Lt(i,t){if(i&1){let e=b();a(0,"button",6),u("click",function(){h(e);let s=p().$implicit,l=p();return C(l.abrirDialogoCancelar(s))}),r(1," Cancelar "),o()}}function zt(i,t){if(i&1){let e=b();a(0,"button",4),u("click",function(){h(e);let s=p().$implicit,l=p();return C(l.verMotivo(s))}),r(1," Motivo "),o()}}function Ht(i,t){if(i&1){let e=b();a(0,"button",5),u("click",function(){h(e);let s=p().$implicit,l=p();return C(l.completarEncuesta(s))}),r(1," Completar Encuesta "),o()}}function $t(i,t){if(i&1){let e=b();a(0,"button",5),u("click",function(){h(e);let s=p().$implicit,l=p();return C(l.calificarAtencion(s))}),r(1," Calificar Atenci\xF3n "),o()}}function Ut(i,t){if(i&1){let e=b();a(0,"button",5),u("click",function(){h(e);let s=p().$implicit,l=p();return C(l.verResena(s))}),r(1," Ver rese\xF1a "),o()}}function Bt(i,t){if(i&1&&(a(0,"td",23),d(1,Lt,2,0,"button",25)(2,zt,2,0,"button",26)(3,Ht,2,0,"button",27)(4,$t,2,0,"button",27)(5,Ut,2,0,"button",27),o()),i&2){let e=t.$implicit;c(),m("ngIf",e.estado!=="realizado"&&e.estado!=="cancelado"&&e.estado!=="rechazado"),c(),m("ngIf",e.comentarioCancelacion),c(),m("ngIf",e.estado==="realizado"&&e.resenaEspecialista&&!e.encuestaPaciente),c(),m("ngIf",e.estado==="realizado"&&!e.calificacionPaciente),c(),m("ngIf",e.estado==="realizado"&&e.resenaEspecialista)}}function Wt(i,t){i&1&&_(0,"tr",28)}function qt(i,t){i&1&&_(0,"tr",29)}var de=class i{constructor(t,e,n,s,l){this.turnoService=t;this.servicio=e;this.toast=n;this.dialog=s;this.auth=l}turnos=[];turnosFiltrados=[];estadoSeleccionado="activos";uidPacienteActual="VXd9ZZMGAue9mmcToYjlNJ3k51a2";columnas=["fechaSolicitado","mensaje","fechaTurno","especialista","especialidad","estado","acciones"];busqueda="";usuario;ngOnInit(){return g(this,null,function*(){this.auth.usuario$.subscribe(t=>g(this,null,function*(){t&&(this.usuario=t,this.turnoService.obtenerTurnosPorPaciente(t.uid).subscribe(e=>g(this,null,function*(){let n=yield Promise.all(e.map(s=>g(this,null,function*(){if(s.resenaEspecialista){let l=yield this.servicio.obtenerResena(s.resenaEspecialista);return Te(xe({},s),{historiaClinica:l})}else return s})));this.turnos=n,this.filtrar("activos")})))}))})}filtrar(t){this.estadoSeleccionado=t,this.aplicarFiltro()}aplicarFiltro(){return g(this,null,function*(){let t=this.turnos.filter(e=>this.estadoSeleccionado==="activos"?e.estado==="pendiente"||e.estado==="aceptado":this.estadoSeleccionado==="cancelado"?e.estado==="cancelado"||e.estado==="rechazado":e.estado===this.estadoSeleccionado);if(this.busqueda.trim()){let e=this.busqueda.toLowerCase();t=t.filter(n=>{let s=n.historiaClinica||{},l=s.dinamicos?.map(x=>`${x.clave} ${x.valor}`).join(" ")||"";return(n.especialistaNombre+" "+n.especialistaApellido).toLowerCase().includes(e)||n.especialidad?.toLowerCase().includes(e)||s.altura?.toLowerCase().includes(e)||s.peso?.toLowerCase().includes(e)||s.temperatura?.toLowerCase().includes(e)||s.presion?.toLowerCase().includes(e)||l.toLowerCase().includes(e)})}this.turnosFiltrados=t})}cancelar(t){}abrirDialogoCancelar(t){this.dialog.open(tt,{width:"400px",data:{titulo:"Cancelar Turno",nombre:`${t.pacienteNombre} ${t.pacienteApellido} (${this.usuario.rol})`}}).afterClosed().subscribe(n=>{if(n){let s=t.pacienteNombre+"@"+t.pacienteApellido+"@"+this.usuario.rol+"@"+n;this.turnoService.cancelarTurno(t,s),console.log("Motivo ingresado:",n)}})}abrirDialogoCancelar2(t){let e=prompt("Ingrese un comentario del porqu\xE9 cancela el turno:");e&&this.turnoService.cancelarTurno(t,e)}verMotivo(t){this.dialog.open(et,{width:"400px",data:{comentario:t.comentarioCancelacion}})}verResena(t){if(!t.resenaEspecialista){this.toast.mostrarMensaje("Este turno no tiene rese\xF1a registrada","Rese\xF1a","info");return}let e=this.dialog.open(Ke,{width:"500px",data:{modo:"ver",id:t.resenaEspecialista},disableClose:!0})}completarEncuesta(t){this.dialog.open(B,{data:{modo:"crear"},width:"500px",disableClose:!0}).afterClosed().subscribe(n=>{n&&this.turnoService.encuestaAtencion(t,n)})}verEncuesta(t){if(!t.encuestaPaciente){this.toast.mostrarMensaje("Este turno no tiene encuesta registrada","Encuesta","info");return}this.dialog.open(B,{width:"500px",data:{modo:"ver",id:t.encuestaPaciente}})}calificarAtencion(t){this.dialog.open(Qe,{data:{modo:"crear"},width:"500px",disableClose:!0}).afterClosed().subscribe(n=>{n&&this.turnoService.calificarAtencion(t,n)})}formatearFecha(t){let e=t.toDate(),n=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getFullYear();return`${n}/${s}/${l}`}static \u0275fac=function(e){return new(e||i)(f(pe),f(me),f(le),f(ae),f(L))};static \u0275cmp=v({type:i,selectors:[["app-mis-turnos"]],decls:39,vars:10,consts:[[1,"contenedor-turnos"],[1,"card-turnos"],[1,"header-filtros"],[1,"botones"],["mat-button","","color","primary",3,"click"],["mat-button","","color","accent",3,"click"],["mat-button","","color","warn",3,"click"],["appearance","outline",1,"buscador"],["matInput","",3,"ngModelChange","input","ngModel"],[1,"tabla-scroll"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","fechaSolicitado"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","mensaje"],["matColumnDef","fechaTurno"],["matColumnDef","especialista"],["matColumnDef","especialidad"],["matColumnDef","estado"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"estado",3,"ngClass"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","accent",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(e,n){e&1&&(a(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"div",3)(4,"button",4),u("click",function(){return n.filtrar("activos")}),r(5," \u{1F552} Pendientes / Aceptados "),o(),a(6,"button",5),u("click",function(){return n.filtrar("realizado")}),r(7," \u2714 Realizados "),o(),a(8,"button",6),u("click",function(){return n.filtrar("cancelado")}),r(9," \u274C Cancelados / Rechazados "),o()(),a(10,"mat-form-field",7)(11,"mat-label"),r(12,"Buscar especialista o especialidad"),o(),a(13,"input",8),R("ngModelChange",function(l){return N(n.busqueda,l)||(n.busqueda=l),l}),u("input",function(){return n.aplicarFiltro()}),o()()(),a(14,"div",9)(15,"table",10),y(16,11),d(17,Et,2,0,"th",12)(18,Dt,2,1,"td",13),E(),y(19,14),d(20,wt,2,0,"th",12)(21,Pt,2,0,"td",13),E(),y(22,15),d(23,It,2,0,"th",12)(24,Ot,2,2,"td",13),E(),y(25,16),d(26,Ft,2,0,"th",12)(27,kt,2,2,"td",13),E(),y(28,17),d(29,At,2,0,"th",12)(30,Vt,2,1,"td",13),E(),y(31,18),d(32,Nt,2,0,"th",12)(33,Rt,4,4,"td",13),E(),y(34,19),d(35,jt,2,0,"th",12)(36,Bt,6,5,"td",13),E(),d(37,Wt,1,0,"tr",20)(38,qt,1,0,"tr",21),o()()()()),e&2&&(c(4),I("activo",n.estadoSeleccionado==="activos"),c(2),I("activo",n.estadoSeleccionado==="realizado"),c(2),I("activo",n.estadoSeleccionado==="cancelado"),c(5),V("ngModel",n.busqueda),c(2),m("dataSource",n.turnosFiltrados),c(22),m("matHeaderRowDef",n.columnas),c(),m("matRowDefColumns",n.columnas))},dependencies:[Y,S,K,w,Q,ee,te,M,oe,ne,ie,P,j,Re,Le,Ue,ze,je,Be,He,$e,We,qe],styles:[".contenedor-turnos[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px}.card-turnos[_ngcontent-%COMP%]{width:100%;max-width:1000px;padding:20px}.header-filtros[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:15px;margin-bottom:20px}.buscador[_ngcontent-%COMP%]{flex:1;min-width:250px}.botones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.botones[_ngcontent-%COMP%]   button.activo[_ngcontent-%COMP%]{font-weight:700;border-bottom:2px solid currentColor}.tabla-scroll[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border-radius:8px}"]})};function Xt(i,t){i&1&&_(0,"app-solicitar-turno")}function Jt(i,t){i&1&&_(0,"app-mis-turnos")}var ue=class i{vistaSeleccionada="solicitar";seleccionarVista(t){this.vistaSeleccionada=t}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-home-paciente"]],decls:17,vars:6,consts:[[1,"header-turnos"],[1,"selector-vista"],[3,"click"],[1,"vista-contenido"],[4,"ngIf"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h1"),r(2,"Mis Turnos"),o(),a(3,"p"),r(4,"Gestiona tus turnos m\xE9dicos"),o(),a(5,"div",1)(6,"button",2),u("click",function(){return n.seleccionarVista("solicitar")}),a(7,"mat-icon"),r(8,"event_available"),o(),r(9," Solicitar turno "),o(),a(10,"button",2),u("click",function(){return n.seleccionarVista("ver")}),a(11,"mat-icon"),r(12,"format_list_bulleted"),o(),r(13," Ver turnos "),o()()(),a(14,"div",3),d(15,Xt,1,0,"app-solicitar-turno",4)(16,Jt,1,0,"app-mis-turnos",4),o()),e&2&&(c(6),I("activo",n.vistaSeleccionada==="solicitar"),c(4),I("activo",n.vistaSeleccionada==="ver"),c(5),m("ngIf",n.vistaSeleccionada==="solicitar"),c(),m("ngIf",n.vistaSeleccionada==="ver"))},dependencies:[z,de,M,re,S],styles:[".header-turnos[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.header-turnos[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:0;color:#fff}.header-turnos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#eee;font-size:1rem;margin-top:5px}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]{margin-top:20px;display:inline-flex;background:#3b5bdb;border-radius:12px;overflow:hidden;box-shadow:0 2px 10px #0003}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:transparent;color:#fff;border:none;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .3s}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button.activo[_ngcontent-%COMP%]{background:#fff;color:#1c3faa}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}"]})};function Yt(i,t){if(i&1&&(a(0,"div",8)(1,"mat-icon"),r(2,"badge"),o(),a(3,"span"),r(4),o()()),i&2){let e=p();c(4),T("DNI: ",e.usuario==null?null:e.usuario.dni,"")}}function Zt(i,t){if(i&1&&(a(0,"div",8)(1,"mat-icon"),r(2,"calendar_today"),o(),a(3,"span"),r(4),o()()),i&2){let e=p();c(4),T("Edad: ",e.usuario==null?null:e.usuario.edad,"")}}function Kt(i,t){if(i&1&&(a(0,"section",6)(1,"h3")(2,"mat-icon"),r(3,"medical_services"),o(),r(4," Obra Social"),o(),a(5,"p"),r(6),o()()),i&2){let e=p();c(6),D(e.usuario==null?null:e.usuario.obraSocial)}}var fe=class i{constructor(t,e,n,s,l){this.auth=t;this.historialMedica=e;this.dialog=n;this.pdf=s;this.usuarioService=l}usuario;ngOnInit(){return g(this,null,function*(){let t=yield this.auth.obtenerSesion();t&&(this.usuario=yield this.usuarioService.obtenerUsuario(t.uid))})}generarPDF(){return g(this,null,function*(){this.dialog.open(ot,{data:{uid:this.usuario.uid},width:"600px"})})}static \u0275fac=function(e){return new(e||i)(f(L),f(it),f(ae),f(nt),f(ce))};static \u0275cmp=v({type:i,selectors:[["app-mi-perfil-paciente"]],decls:29,vars:11,consts:[[1,"perfil-facebook"],[1,"portada-container"],["alt","Foto de portada",1,"foto-portada",3,"src"],["alt","Foto de perfil",1,"foto-perfil-superpuesta",3,"src"],[1,"contenido-perfil"],[1,"nombre-usuario"],[1,"seccion-info"],["class","info-item",4,"ngIf"],[1,"info-item"],["class","seccion-info",4,"ngIf"],["mat-raised-button","","color","blue",3,"click"]],template:function(e,n){e&1&&(a(0,"mat-card",0)(1,"div",1),_(2,"img",2)(3,"img",3),o(),a(4,"mat-card-content",4),_(5,"br"),a(6,"h2",5),r(7),o(),a(8,"section",6)(9,"h3")(10,"mat-icon"),r(11,"person"),o(),r(12," Datos personales"),o(),d(13,Yt,5,1,"div",7)(14,Zt,5,1,"div",7),a(15,"div",8)(16,"mat-icon"),r(17,"mail"),o(),a(18,"span"),r(19),o()(),a(20,"div",8)(21,"mat-icon"),r(22,"verified_user"),o(),a(23,"span"),r(24),X(25,"titlecase"),o()()(),d(26,Kt,7,1,"section",9),a(27,"button",10),u("click",function(){return n.generarPDF()}),r(28,"Descargar historial Clinica"),o()()()),e&2&&(c(2),m("src",n.usuario==null?null:n.usuario.imagen2Url,A),c(),m("src",n.usuario==null?null:n.usuario.imagenUrl,A),c(4),O("",n.usuario==null?null:n.usuario.nombre," ",n.usuario==null?null:n.usuario.apellido,""),c(6),m("ngIf",n.usuario==null?null:n.usuario.dni),c(),m("ngIf",n.usuario==null?null:n.usuario.edad),c(5),T("Email: ",n.usuario==null?null:n.usuario.email,""),c(5),T("Rol: ",J(25,9,n.usuario==null?null:n.usuario.rol),""),c(2),m("ngIf",n.usuario==null?null:n.usuario.obraSocial))},dependencies:[M,P,j,we,re,S,w,K],styles:[".perfil-facebook[_ngcontent-%COMP%]{max-width:650px;margin:auto;overflow:hidden;padding:0;border-radius:12px}.portada-container[_ngcontent-%COMP%]{position:relative;height:200px}.foto-portada[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.foto-perfil-superpuesta[_ngcontent-%COMP%]{position:absolute;bottom:-50px;left:50%;transform:translate(-50%);border:4px solid white;border-radius:50%;width:100px;height:100px;object-fit:cover;background-color:#fff}.contenido-perfil[_ngcontent-%COMP%]{padding-top:60px;padding:1rem;text-align:left}.nombre-usuario[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.seccion-info[_ngcontent-%COMP%]{margin-top:1rem}.seccion-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1a237e;display:flex;align-items:center;gap:6px;margin-bottom:10px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:6px 0;color:#333;font-size:.95rem}mat-icon[_ngcontent-%COMP%]{color:#1a73e8}"]})};var ge=class i{prepareRoute(t){return t?.activatedRouteData?.animation}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-paciente-layout"]],decls:5,vars:1,consts:[["outlet","outlet"],[1,"app-container"],[1,"contenido"]],template:function(e,n){if(e&1&&(a(0,"div",1)(1,"div",2)(2,"main"),_(3,"router-outlet",null,0),o()()()),e&2){let s=ye(4);c(2),m("@routeAnimations",n.prepareRoute(s))}},dependencies:[De],encapsulation:2,data:{animation:[Je("routeAnimations",[Ze("* <=> *",[se(":enter, :leave",[$({position:"absolute",width:"100%"})],{optional:!0}),Ye([se(":leave",[be("200ms ease-out",$({opacity:0,transform:"translateX(-40px)"}))],{optional:!0}),se(":enter",[$({opacity:0,transform:"translateX(40px)"}),be("300ms ease-in",$({opacity:1,transform:"translateX(0)"}))],{optional:!0})])])])]}})};var Qt=[{path:"",component:ge,children:[{path:"",component:ue,data:{animation:"home"}},{path:"perfil",component:fe,data:{animation:"perfil"}},{path:"solicitar-turno",component:z,data:{animation:"turno"}}]}],_e=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=q({type:i});static \u0275inj=W({imports:[Ce.forChild(Qt),Ce]})};var ct=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=q({type:i});static \u0275inj=W({imports:[Ee,_e]})};export{ct as PacienteModule};
