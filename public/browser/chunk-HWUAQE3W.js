import{a as q,b as Me,c as Ee,d as Se,e as we,f as ye}from"./chunk-I7VIIAPC.js";import{A as d,Aa as ge,B as b,Ba as _e,Ca as be,D as r,Da as Ce,E as K,Ea as xe,F as y,Fa as he,G as Q,Ga as M,L as T,M as N,T as L,U as X,V as _,W,Wa as ve,X as Y,Z,_ as ee,aa as te,ba as ne,c as k,ca as ie,da as oe,ea as j,f as D,fa as re,ga as ae,h as S,ha as me,i as w,ia as le,ja as I,m as J,ma as z,n as a,p as x,q as h,r as U,ra as se,s,t as l,u as o,ua as ce,v as i,w as p,wa as pe,x as f,xa as de,y as g,ya as ue,z as A,za as fe}from"./chunk-HGRT75S4.js";function Oe(e,t){e&1&&(o(0,"th",13),r(1," Foto "),i())}function ke(e,t){if(e&1&&(o(0,"td",14),p(1,"img",15),i()),e&2){let n=t.$implicit;a(),l("src",n.imagenUrl,J)}}function Ae(e,t){e&1&&(o(0,"th",13),r(1," Nombre "),i())}function Fe(e,t){if(e&1&&(o(0,"td",14),r(1),i()),e&2){let n=t.$implicit;a(),Q(" ",n.nombre," ",n.apellido," ")}}function De(e,t){e&1&&(o(0,"th",13),r(1," DNI "),i())}function Ue(e,t){if(e&1&&(o(0,"td",14),r(1),i()),e&2){let n=t.$implicit;a(),y(" ",n.dni," ")}}function Ne(e,t){e&1&&(o(0,"th",13),r(1," Edad "),i())}function je(e,t){if(e&1&&(o(0,"td",14),r(1),i()),e&2){let n=t.$implicit;a(),y(" ",n.edad," ")}}function ze(e,t){e&1&&(o(0,"th",13),r(1," Correo "),i())}function qe(e,t){if(e&1&&(o(0,"td",14),r(1),i()),e&2){let n=t.$implicit;a(),y(" ",n.email," ")}}function He(e,t){e&1&&(o(0,"th",13),r(1," Rol "),i())}function Ve(e,t){if(e&1&&(o(0,"td",14),r(1),i()),e&2){let n=t.$implicit;a(),y(" ",n.rol," ")}}function $e(e,t){e&1&&(o(0,"th",13),r(1," Estado "),i())}function Be(e,t){if(e&1&&(o(0,"span"),r(1),i()),e&2){let n=b().$implicit;a(),K(n.aprobado?"Habilitado":"Deshabilitado")}}function Ge(e,t){if(e&1&&(o(0,"td",14),s(1,Be,2,1,"span",16),i()),e&2){let n=t.$implicit;a(),l("ngIf",n.rol==="especialista")}}function Le(e,t){e&1&&(o(0,"th",13),r(1," Acciones "),i())}function Je(e,t){if(e&1){let n=A();o(0,"button",18),d("click",function(){S(n);let c=b().$implicit,u=b();return w(u.toggleEstado(c))}),r(1),i()}if(e&2){let n=b().$implicit;a(),y(" ",n.aprobado?"Deshabilitar":"Habilitar"," ")}}function Ke(e,t){if(e&1&&(o(0,"td",14),s(1,Je,2,1,"button",17),i()),e&2){let n=t.$implicit;a(),l("ngIf",n.rol==="especialista")}}function Qe(e,t){e&1&&p(0,"tr",19)}function Xe(e,t){e&1&&p(0,"tr",20)}var H=class e{constructor(t){this.usuarioService=t;this.listar()}usuarios=[];roles=["paciente","especialista"];rolSeleccionado="especialista";columnas=["foto","nombre","dni","edad","email","rol","estado","acciones"];listar(){return k(this,null,function*(){this.usuarios=yield this.usuarioService.listarUsuariosPorRol(this.rolSeleccionado)})}toggleEstado(t){return k(this,null,function*(){let n=!t.aprobado;yield this.usuarioService.actualizarEstadoEspecialista(t.uid,n),t.aprobado=n})}static \u0275fac=function(n){return new(n||e)(x(q))};static \u0275cmp=h({type:e,selectors:[["app-tabla-usuarios"]],decls:30,vars:3,consts:[["mat-table","",1,"mat-elevation-z8",2,"width","100%","margin-top","16px",3,"dataSource"],["matColumnDef","foto"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","dni"],["matColumnDef","edad"],["matColumnDef","email"],["matColumnDef","rol"],["matColumnDef","estado"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","foto","width","40","height","40",2,"border-radius","50%",3,"src"],[4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,m){n&1&&(o(0,"mat-card")(1,"h2"),r(2,"Especialistas"),i(),o(3,"table",0),f(4,1),s(5,Oe,2,0,"th",2)(6,ke,2,1,"td",3),g(),f(7,4),s(8,Ae,2,0,"th",2)(9,Fe,2,2,"td",3),g(),f(10,5),s(11,De,2,0,"th",2)(12,Ue,2,1,"td",3),g(),f(13,6),s(14,Ne,2,0,"th",2)(15,je,2,1,"td",3),g(),f(16,7),s(17,ze,2,0,"th",2)(18,qe,2,1,"td",3),g(),f(19,8),s(20,He,2,0,"th",2)(21,Ve,2,1,"td",3),g(),f(22,9),s(23,$e,2,0,"th",2)(24,Ge,2,1,"td",3),g(),f(25,10),s(26,Le,2,0,"th",2)(27,Ke,2,1,"td",3),g(),s(28,Qe,1,0,"tr",11)(29,Xe,1,0,"tr",12),i()()),n&2&&(a(3),l("dataSource",m.usuarios),a(25),l("matHeaderRowDef",m.columnas),a(),l("matRowDefColumns",m.columnas))},dependencies:[M,I,z,pe,ue,be,fe,de,Ce,ge,_e,xe,he,N,T,oe,j],styles:['@charset "UTF-8";mat-card[_ngcontent-%COMP%]{padding:1rem;border-radius:12px;background-color:#fff;box-shadow:0 2px 8px #0000001a;max-width:100%}h2[_ngcontent-%COMP%]{text-align:center;font-size:1.4rem;margin-bottom:.8rem;color:#3f51b5}table.mat-table[_ngcontent-%COMP%]{font-size:.85rem;border-radius:8px;overflow:hidden}.mat-header-row[_ngcontent-%COMP%]{background-color:#00bcd4;color:#fff;font-weight:700;height:40px}.mat-header-cell[_ngcontent-%COMP%]{padding:6px 12px}.mat-cell[_ngcontent-%COMP%]{padding:6px 12px;line-height:1.2;height:36px}.mat-row[_ngcontent-%COMP%]:hover{background-color:#f0faff}.mat-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover}.mat-cell[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]{padding:2px 8px;font-size:.75rem;min-width:unset;line-height:1.4;border-radius:6px}mat-card[_ngcontent-%COMP%]{padding:2rem;border-radius:16px;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 8px 24px #0003;border:1px solid rgba(255,255,255,.2)}h2[_ngcontent-%COMP%]{text-align:center;font-size:1.6rem;color:#3f51b5;margin-bottom:1rem;font-weight:600}table.mat-table[_ngcontent-%COMP%]{font-size:.85rem;border-radius:12px;overflow:hidden;background-color:#ffffff0d}.mat-header-row[_ngcontent-%COMP%]{background-color:#00bcd466;color:#fff;font-weight:700;height:42px}.mat-header-cell[_ngcontent-%COMP%]{padding:8px 12px;border-right:1px solid rgba(255,255,255,.15)}.mat-cell[_ngcontent-%COMP%]{padding:8px 12px;color:#f0f0f0;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);height:40px;border-bottom:1px solid rgba(255,255,255,.05)}.mat-row[_ngcontent-%COMP%]:hover{background-color:#00bcd41a;transition:.2s ease-in-out}.mat-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover;box-shadow:0 0 4px #0003}.mat-cell[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]{padding:4px 10px;font-size:.75rem;color:#00bcd4;font-weight:700;background:transparent;border-radius:6px;transition:background .2s}.mat-cell[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]:hover{background-color:#00bcd41a}']})};var R=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-usuarios"]],decls:1,vars:0,template:function(n,m){n&1&&p(0,"app-tabla-usuarios")},dependencies:[H],encapsulation:2})};function We(e,t){e&1&&p(0,"app-spinner",5)}function Ye(e,t){e&1&&(o(0,"mat-error"),r(1,"El correo es requerido"),i())}function Ze(e,t){e&1&&(o(0,"mat-error"),r(1,"El correo es inv\xE1lido"),i())}function et(e,t){e&1&&(o(0,"mat-error"),r(1,"La contrase\xF1a es requerida"),i())}function tt(e,t){e&1&&(o(0,"mat-error"),r(1,"Debe tener al menos 6 caracteres"),i())}function nt(e,t){if(e&1){let n=A();f(0),o(1,"mat-form-field",6)(2,"mat-label"),r(3,"Email"),i(),p(4,"input",7),s(5,Ye,2,0,"mat-error",4)(6,Ze,2,0,"mat-error",4),i(),o(7,"mat-form-field",6)(8,"mat-label"),r(9,"Contrase\xF1a"),i(),p(10,"input",8),s(11,et,2,0,"mat-error",4)(12,tt,2,0,"mat-error",4),i(),o(13,"div",9)(14,"div",10)(15,"mat-icon",11),r(16,"image"),i(),o(17,"input",12),d("change",function(c){S(n);let u=b();return w(u.seleccionarImagen(c))}),i()()(),o(18,"div",13)(19,"button",14),d("click",function(){S(n);let c=b();return w(c.paso=2)}),r(20," Siguiente "),i()(),g()}if(e&2){let n,m,c,u,v=b();a(5),l("ngIf",(n=v.formulario.get("email"))==null?null:n.hasError("required")),a(),l("ngIf",(m=v.formulario.get("email"))==null?null:m.hasError("email")),a(5),l("ngIf",(c=v.formulario.get("password"))==null?null:c.hasError("required")),a(),l("ngIf",(u=v.formulario.get("password"))==null?null:u.hasError("minlength"))}}function it(e,t){e&1&&(o(0,"mat-error"),r(1,"El nombre es requerido"),i())}function ot(e,t){e&1&&(o(0,"mat-error"),r(1,"El apellido es requerido"),i())}function rt(e,t){e&1&&(o(0,"mat-error"),r(1,"El DNI es requerido"),i())}function at(e,t){e&1&&(o(0,"mat-error"),r(1,"El DNI debe tener entre 7 y 8 n\xFAmeros"),i())}function mt(e,t){e&1&&(o(0,"mat-error"),r(1,"La edad es requerida"),i())}function lt(e,t){e&1&&(o(0,"mat-error"),r(1,"La edad m\xEDnima es 18"),i())}function st(e,t){e&1&&(o(0,"mat-error"),r(1,"La edad m\xE1xima es 100"),i())}function ct(e,t){if(e&1){let n=A();f(0),o(1,"mat-form-field",15)(2,"mat-label"),r(3,"Nombre"),i(),p(4,"input",16),s(5,it,2,0,"mat-error",4),i(),o(6,"mat-form-field",15)(7,"mat-label"),r(8,"Apellido"),i(),p(9,"input",17),s(10,ot,2,0,"mat-error",4),i(),o(11,"mat-form-field",15)(12,"mat-label"),r(13,"DNI"),i(),p(14,"input",18),s(15,rt,2,0,"mat-error",4)(16,at,2,0,"mat-error",4),i(),o(17,"mat-form-field",15)(18,"mat-label"),r(19,"Edad"),i(),p(20,"input",19),s(21,mt,2,0,"mat-error",4)(22,lt,2,0,"mat-error",4)(23,st,2,0,"mat-error",4),i(),o(24,"div",20)(25,"button",21),d("click",function(){S(n);let c=b();return w(c.paso=1)}),r(26,"Atr\xE1s"),i(),o(27,"button",22),r(28," Registrarse "),i()(),g()}if(e&2){let n,m,c,u,v,E,F,C=b();a(5),l("ngIf",(n=C.formulario.get("nombre"))==null?null:n.hasError("required")),a(5),l("ngIf",(m=C.formulario.get("apellido"))==null?null:m.hasError("required")),a(5),l("ngIf",(c=C.formulario.get("dni"))==null?null:c.hasError("required")),a(),l("ngIf",(u=C.formulario.get("dni"))==null?null:u.hasError("pattern")),a(5),l("ngIf",(v=C.formulario.get("edad"))==null?null:v.hasError("required")),a(),l("ngIf",(E=C.formulario.get("edad"))==null?null:E.hasError("min")),a(),l("ngIf",(F=C.formulario.get("edad"))==null?null:F.hasError("max")),a(4),l("disabled",C.cargando)}}var $=class e{constructor(t,n,m,c,u){this.fb=t;this.usuarioService=n;this.authService=m;this.imagenesService=c;this.toastService=u;this.formulario=this.fb.group({email:["",[_.required,_.email]],password:["",[_.required,_.minLength(6)]],nombre:["",_.required],apellido:["",_.required],dni:["",[_.required,_.pattern(/^\d{7,8}$/)]],edad:["",[_.required,_.min(18),_.max(100)]]})}paso=1;formulario;imagen;cargando=!1;seleccionarImagen(t){this.imagen=t.target.files[0]}registrar(){return k(this,null,function*(){if(this.formulario.invalid||!this.imagen){this.toastService.mostrarMensaje("Complet\xE1 todos los campos y sub\xED una imagen","Registro exitoso.","error");return}this.cargando=!0,console.log(this.cargando);let{email:t,password:n,nombre:m,apellido:c,edad:u,dni:v}=this.formulario.value;try{let E=t,F=yield this.imagenesService.subirImagen(`usuarios/${E}_especialista.jpg`,this.imagen),C={nombre:m,password:n,apellido:c,edad:u,dni:v,email:t,rol:"admin",imagenUrl:F};this.authService.registrarAdminDesdeBackend(C),setTimeout(()=>{this.toastService.mostrarMensaje("Inicia sesion para verificar tu correo","Registro exitoso.","success"),this.formulario.reset(),this.cargando=!1},3e3)}catch(E){this.toastService.mensajeErrorRegistro(E),console.error(E)}})}static \u0275fac=function(n){return new(n||e)(x(ie),x(q),x(ve),x(Ee),x(Se))};static \u0275cmp=h({type:e,selectors:[["app-form-registro-admin"]],decls:9,vars:4,consts:[[1,"registro-card"],["class","overlay-spinner",4,"ngIf"],[1,"titulo-registro"],[1,"form-grid-compact",3,"ngSubmit","formGroup"],[4,"ngIf"],[1,"overlay-spinner"],["appearance","fill",1,"campo-full"],["matInput","","type","email","formControlName","email"],["matInput","","type","password","formControlName","password"],[1,"campo-full","fila-imagenes"],[1,"campo-imagen"],[1,"icono-imagen"],["id","imagen","type","file",3,"change"],[1,"campo-full"],["mat-raised-button","","color","primary","type","button",1,"boton-siguiente",3,"click"],["appearance","fill"],["matInput","","formControlName","nombre"],["matInput","","formControlName","apellido"],["matInput","","formControlName","dni"],["matInput","","type","number","formControlName","edad"],[1,"botones-navegacion","campo-full"],["mat-stroked-button","","type","button",1,"boton-siguiente",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"boton-siguiente",3,"disabled"]],template:function(n,m){n&1&&(o(0,"mat-card",0),s(1,We,1,0,"app-spinner",1),o(2,"h2",2),r(3,"Registro de Administrador"),i(),p(4,"br")(5,"br"),o(6,"form",3),d("ngSubmit",function(){return m.registrar()}),s(7,nt,21,4,"ng-container",4)(8,ct,29,8,"ng-container",4),i()()),n&2&&(a(),l("ngIf",m.cargando),a(5),l("formGroup",m.formulario),a(),l("ngIf",m.paso===1),a(),l("ngIf",m.paso===2))},dependencies:[M,le,me,re,ae,I,z,ce,j,Z,X,ee,W,Y,te,ne,Me,T],styles:[".registro-card[_ngcontent-%COMP%]{max-width:650px;margin:auto;padding:1rem;border-radius:12px;background-color:#fffffff2;box-shadow:0 4px 12px #0003}.titulo-registro[_ngcontent-%COMP%]{font-size:1.6rem;text-align:center;margin-bottom:1rem;color:#333}.form-grid-compact[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}mat-form-field[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:0}mat-label[_ngcontent-%COMP%]{font-size:.8rem}input[matInput][_ngcontent-%COMP%]{height:28px;font-size:.85rem;padding:.2rem .5rem}.campo-full[_ngcontent-%COMP%]{grid-column:span 2}.nueva-especialidad[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.flex-1[_ngcontent-%COMP%]{flex:1}.fila-imagenes[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:.5rem}.campo-imagen[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#f5f5f5;padding:.5rem;border-radius:8px;white-space:nowrap}.icono-imagen[_ngcontent-%COMP%]{font-size:20px;color:#2196f3}.boton-submit[_ngcontent-%COMP%]{grid-column:span 2;margin-top:1rem;width:100%;background-color:#00bcd4;color:#fff;font-weight:700;font-size:.95rem;padding:.6rem 0}.boton-submit[_ngcontent-%COMP%]:hover{background-color:#00acc1}.overlay-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ffffffb3;display:flex;align-items:center;justify-content:center;z-index:999;border-radius:12px}.botones-navegacion[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem}.boton-siguiente[_ngcontent-%COMP%]{width:100%;margin-top:1rem;background-color:#00bcd4;color:#fff}.boton-siguiente[_ngcontent-%COMP%]:hover{background-color:#00acc1}"]})};var O=class e{constructor(t){this.dialog=t}tipo=null;abrirModal(t){t==="paciente"?this.dialog.open(ye,{width:"500px",panelClass:"custom-dialog-container"}):t==="especialista"?this.dialog.open(we,{width:"400px",panelClass:"custom-dialog-container"}):t==="admin"&&this.dialog.open($,{width:"400px",panelClass:"custom-dialog-container"})}static \u0275fac=function(n){return new(n||e)(x(se))};static \u0275cmp=h({type:e,selectors:[["app-registro-admin"]],decls:12,vars:0,consts:[[1,"titulo-registro"],[1,"selector"],[1,"boton-selector","paciente",3,"click"],[1,"texto-superpuesto"],[1,"boton-selector","especialista",3,"click"],[1,"boton-selector","admin",3,"click"]],template:function(n,m){n&1&&(o(0,"h2",0),r(1,"Registrarte como..."),i(),o(2,"div",1)(3,"button",2),d("click",function(){return m.abrirModal("paciente")}),o(4,"span",3),r(5,"Paciente"),i()(),o(6,"button",4),d("click",function(){return m.abrirModal("especialista")}),o(7,"span",3),r(8,"Especialista"),i()(),o(9,"button",5),d("click",function(){return m.abrirModal("admin")}),o(10,"span",3),r(11,"Administrador"),i()()())},dependencies:[M],styles:['.titulo-registro[_ngcontent-%COMP%]{text-align:center;font-size:2rem;margin-bottom:1rem;color:#fff}.selector[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin-bottom:2rem;flex-wrap:wrap}.boton-selector[_ngcontent-%COMP%]{width:220px;height:220px;border:none;border-radius:12px;background-size:cover;background-position:center;position:relative;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;box-shadow:0 4px 12px #0006}.boton-selector[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #00000080}.boton-selector.paciente[_ngcontent-%COMP%]{background-image:url("./media/paciente-7NQDVGKI.jpeg")}.boton-selector.especialista[_ngcontent-%COMP%]{background-image:url("./media/especialista-5U3THJMR.jpeg")}.boton-selector.admin[_ngcontent-%COMP%]{background-image:url("./media/admin-P5LOTOXN.jpeg")}.texto-superpuesto[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:0;right:0;text-align:center;font-size:1.5rem;font-weight:700;color:#fff;text-shadow:0 0 5px rgba(0,0,0,.7);pointer-events:none}']})};function pt(e,t){e&1&&p(0,"app-registro-admin")}function dt(e,t){e&1&&p(0,"app-usuarios")}var B=class e{tipo=null;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-home-admin"]],decls:12,vars:2,consts:[[1,"selector"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"formulario"],[4,"ngIf"]],template:function(n,m){n&1&&(o(0,"h1"),r(1,"Panel de adminsitrador"),i(),o(2,"div",0)(3,"button",1),d("click",function(){return m.tipo="aceptar-rechazar"}),r(4,"Aceptar o Rechazar Especialistas"),i(),o(5,"button",2),d("click",function(){return m.tipo="registrar-usuarios"}),r(6,"Registrar usuarios"),i()(),p(7,"br")(8,"br"),o(9,"div",3),s(10,pt,1,0,"app-registro-admin",4)(11,dt,1,0,"app-usuarios",4),i()),n&2&&(a(10),l("ngIf",m.tipo==="registrar-usuarios"),a(),l("ngIf",m.tipo==="aceptar-rechazar"))},dependencies:[M,I,O,R,T],styles:[".selector[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin-top:1.5rem;flex-wrap:wrap}.selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:220px;height:100px;font-size:1rem;font-weight:700;border-radius:8px;text-align:center;padding:1rem;white-space:normal;line-height:1.4}h1[_ngcontent-%COMP%]{text-align:center;color:#3f51b5;margin-top:1rem}"]})};var ut=[{path:"",component:B},{path:"lista",component:R},{path:"registro",component:O}],G=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=U({type:e});static \u0275inj=D({imports:[L.forChild(ut),L]})};var Ie=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=U({type:e});static \u0275inj=D({imports:[N,G]})};export{Ie as AdminModule};
