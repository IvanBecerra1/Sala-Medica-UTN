import{a as Re,b as je,c as Le,d as He,e as ze,f as re,g as We,h as Be,i as Ue}from"./chunk-TBW54ZMP.js";import{a as oe,b as ae}from"./chunk-7GPANA6P.js";import{$a as ye,A as G,B as d,Ba as I,D as m,Da as R,E as O,F as a,Fa as j,G as o,Ga as Q,H as D,I as y,Ia as F,J as w,K as h,Ka as L,L as u,La as Ce,M as p,Oa as ve,P as r,Pa as Se,Q as S,Qa as ee,R as P,Ra as be,S as k,Sa as Me,Ta as xe,U as b,Ua as Te,V as M,Va as te,W as x,Wa as ie,Xa as ne,Y as J,Z as Y,Za as Ee,Zb as H,_a as De,ab as we,ba as ge,bb as Pe,ca as Z,cb as Ie,da as T,db as Fe,ea as X,eb as Oe,fa as he,fb as ke,gb as Ve,h as q,ib as Ae,jb as Ne,kb as E,m as _,n as g,na as ue,oa as K,qa as A,ua as N,v as de,w as l,y as f,z as v}from"./chunk-EMMS4W2A.js";import"./chunk-FK6H3RFT.js";import{g as C}from"./chunk-RA2WU32H.js";function it(i,t){if(i&1&&(a(0,"mat-option",7),r(1),o()),i&2){let e=t.$implicit;m("value",e),l(),S(e)}}function nt(i,t){if(i&1&&(a(0,"mat-option",7),r(1),o()),i&2){let e=t.$implicit;m("value",e),l(),k(" Dr./Dra. ",e.nombre," ",e.apellido," ")}}function ot(i,t){if(i&1){let e=h();a(0,"mat-form-field",2)(1,"mat-label"),r(2,"\u{1F464} Profesional"),o(),a(3,"mat-select",3),x("ngModelChange",function(s){_(e);let c=p();return M(c.especialistaSeleccionado,s)||(c.especialistaSeleccionado=s),g(s)}),u("selectionChange",function(){_(e);let s=p();return g(s.cargarFechasDisponibles())}),d(4,nt,2,3,"mat-option",4),o()()}if(i&2){let e=p();l(3),b("ngModel",e.especialistaSeleccionado),l(),m("ngForOf",e.especialistasFiltrados)}}function at(i,t){if(i&1&&(a(0,"mat-option",7),r(1),o()),i&2){let e=t.$implicit;m("value",e),l(),P(" ",e," ")}}function rt(i,t){if(i&1){let e=h();a(0,"mat-form-field",2)(1,"mat-label"),r(2,"\u{1F4C5} Fecha Disponible"),o(),a(3,"mat-select",3),x("ngModelChange",function(s){_(e);let c=p();return M(c.fechaSeleccionada,s)||(c.fechaSeleccionada=s),g(s)}),u("selectionChange",function(){_(e);let s=p();return g(s.seleccionarFecha(s.fechaSeleccionada))}),d(4,at,2,2,"mat-option",4),o()()}if(i&2){let e=p();l(3),b("ngModel",e.fechaSeleccionada),l(),m("ngForOf",e.fechasDisponibles)}}function st(i,t){i&1&&(a(0,"span"),r(1," (Ocupado)"),o())}function lt(i,t){if(i&1&&(a(0,"mat-option",9),r(1),d(2,st,2,0,"span",10),o()),i&2){let e=t.$implicit;m("value",e.hora)("disabled",e.estado==="ocupado"),l(),P(" ",e.hora," "),l(),m("ngIf",e.estado==="ocupado")}}function ct(i,t){if(i&1&&(a(0,"mat-form-field",2)(1,"mat-label"),r(2,"\u{1F552} Horario Disponible"),o(),a(3,"mat-select"),d(4,lt,3,4,"mat-option",8),o()()),i&2){let e=p();l(4),m("ngForOf",e.horariosDisponibles)}}function mt(i,t){if(i&1){let e=h();a(0,"div",11)(1,"button",12),u("click",function(){_(e);let s=p();return g(s.reservarTurno(s.fechaSeleccionada,s.getPrimerHorarioDisponible()))}),r(2," \u{1F4C5} Confirmar Turno "),o()()}}var z=class i{constructor(t,e,n,s){this.turnosService=t;this.toastService=e;this.usuariosService=n;this.auth=s}especialidades=[""];especialidadSeleccionada="";especialistasFiltrados=[];especialistaSeleccionado;fechasDisponibles=[];fechaSeleccionada="";horariosDisponibles=[];usuarioLogueado=null;pacientes;pacienteSeleccionado;ngOnInit(){this.auth.usuario$.subscribe(t=>{t?this.usuarioLogueado=t:this.usuarioLogueado={rol:"no-registrado"}}),this.cargarListaEspecialidades()}cargarListaEspecialidades(){return C(this,null,function*(){this.especialidades=yield this.usuariosService.obtenerEspecialidadesUnicas()})}cargarEspecialistas(){this.especialistaSeleccionado=null,this.fechaSeleccionada="",this.fechasDisponibles=[],this.horariosDisponibles=[],this.usuariosService.getUsuarios().subscribe(t=>{this.especialistasFiltrados=t.filter(e=>e.rol==="especialista"&&e.aprobado&&e.especialidades.includes(this.especialidadSeleccionada))})}generarHorarios(t){let e=t.disponibilidad?.horarios||[],n=[];for(let s of e){let[c,B]=s.replace(".",":").split(" a "),[V,U]=c.split(":").map(Number),[_e,Xe]=B.split(":").map(Number);for(;V<_e||V===_e&&U<Xe;)n.push(`${V.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`),U+=30,U===60&&(U=0,V++)}return n}cargarFechasDisponibles(){this.horariosDisponibles=[],this.fechaSeleccionada="",this.fechasDisponibles=[],console.log("ESPECIALISTA SELECCIONADO"),console.log(this.especialistaSeleccionado),console.log(this.especialistaSeleccionado.disponibilidad);let t=this.especialistaSeleccionado.disponibilidad;if(!t||!Array.isArray(t.dias)||t.dias.length===0||!Array.isArray(t.horarios)||t.horarios.length===0){this.toastService.mostrarMensaje("El especialista no tiene horarios/d\xEDas disponibles","Solicitud turnos","info");return}let e=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],n=new Date,s=1;switch(t.dias.length){case 1:s=3;break;case 2:s=5;break;case 3:s=7;break;case 4:s=9;break;case 5:s=11;break;case 6:s=13;break}console.log("dias leght: "+t.dias.length),console.log("for contador: "+s),console.log("for contador multipli: "+(2+(t.dias.length+t.dias.length-1)));for(let c=0;this.fechasDisponibles.length<s;c++){let B=new Date;B.setDate(n.getDate()+c);let V=e[B.getDay()];t.dias.includes(V)&&this.fechasDisponibles.push(B.toISOString().split("T")[0])}console.log("FECHAS CARGADAS:"),console.log(this.fechasDisponibles)}seleccionarFecha(t){return C(this,null,function*(){this.fechaSeleccionada=t;let e=this.generarHorarios(this.especialistaSeleccionado),n=[];(yield this.turnosService.getTurnosByEspecialistaFecha(this.especialistaSeleccionado.uid,t)).forEach(c=>{["pendiente","aceptado"].includes(c.estado)&&n.push(c.hora)}),this.horariosDisponibles=e.map(c=>({hora:c,estado:n.includes(c)?"ocupado":"disponible"}))})}get puedeConfirmarTurno(){return!!this.fechaSeleccionada&&this.horariosDisponibles.some(t=>t.estado==="disponible")}getPrimerHorarioDisponible(){let t=this.horariosDisponibles.find(e=>e.estado==="disponible");return t?t.hora:""}reservarTurno(t,e){return C(this,null,function*(){if(!this.especialidadSeleccionada||!this.especialistaSeleccionado||!t||!e){this.toastService.mostrarMensaje("Faltan datos obligatorios para reservar el turno.","Reserva de turno","error");return}if(!(yield this.turnosService.verificarDisponibilidad(this.especialistaSeleccionado.uid,t,e))){this.toastService.mostrarMensaje("Horario ocupado","Ese turno ya fue solicitado.","info");return}let s={especialidad:this.especialidadSeleccionada,fechaTurno:t,fechaSolicictado:new Date,hora:e,estado:"pendiente",especialistaUid:this.especialistaSeleccionado.uid,especialistaNombre:this.especialistaSeleccionado.nombre,especialistaApellido:this.especialistaSeleccionado.apellido,especialistaDni:this.especialistaSeleccionado.dni,pacienteUid:this.usuarioLogueado.uid,pacienteNombre:this.usuarioLogueado.nombre,pacienteApellido:this.usuarioLogueado.apellido,pacienteDni:this.usuarioLogueado.dni,obraSocial:this.usuarioLogueado.obraSocial};yield this.turnosService.guardarTurno(s),this.toastService.mostrarMensaje("\xC9xito","Turno reservado correctamente.","success")})}static \u0275fac=function(e){return new(e||i)(f(re),f(ae),f(oe),f(H))};static \u0275cmp=v({type:i,selectors:[["app-solicitar-turno"]],decls:12,vars:6,consts:[[1,"form-card"],[1,"titulo"],["appearance","fill",1,"form-control"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill","class","form-control",4,"ngIf"],["class","boton-container",4,"ngIf"],[3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[4,"ngIf"],[1,"boton-container"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){e&1&&(a(0,"mat-card",0)(1,"h2",1),r(2,"Solicitar Nuevo Turno"),o(),a(3,"mat-form-field",2)(4,"mat-label"),r(5,"\u{1FA7A} Especialidad M\xE9dica"),o(),a(6,"mat-select",3),x("ngModelChange",function(c){return M(n.especialidadSeleccionada,c)||(n.especialidadSeleccionada=c),c}),u("selectionChange",function(){return n.cargarEspecialistas()}),d(7,it,2,2,"mat-option",4),o()(),d(8,ot,5,2,"mat-form-field",5)(9,rt,5,2,"mat-form-field",5)(10,ct,5,1,"mat-form-field",5)(11,mt,3,0,"div",6),o()),e&2&&(l(6),b("ngModel",n.especialidadSeleccionada),l(),m("ngForOf",n.especialidades),l(),m("ngIf",n.especialistasFiltrados.length>0),l(),m("ngIf",n.fechasDisponibles.length>0&&n.especialistasFiltrados.length>0),l(),m("ngIf",n.horariosDisponibles.length>0&&n.especialistasFiltrados.length>0),l(),m("ngIf",n.puedeConfirmarTurno))},dependencies:[E,j,R,F,L,ie,te,Z,T,I,A,N],styles:[".form-card[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;padding:30px;background-color:#f5f9ff;border-radius:12px}.titulo[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px;color:#1a237e;font-weight:700}.form-control[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.boton-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}"]})};function pt(i,t){if(i&1&&(a(0,"mat-option",10),r(1),o()),i&2){let e=t.$implicit;m("value",e),l(),S(e)}}function dt(i,t){if(i&1){let e=h();a(0,"button",11),u("click",function(){_(e);let s=p();return g(s.confirmar())}),r(1,"Enviar"),o()}}var $=class i{constructor(t,e,n){this.service=t;this.dialogRef=e;this.data=n}modoVisualizacion=!1;encuesta={ambiente:"",comentario:"",volveria:""};opciones=["Excelente","Bueno","Regular","Malo"];ngOnInit(){return C(this,null,function*(){if(this.data?.modo==="ver"){this.modoVisualizacion=!0;let t=yield this.service.obtenerEncuesta(this.data.id);this.encuesta=t}})}confirmar(){return C(this,null,function*(){if(!this.encuesta.ambiente||!this.encuesta.volveria||!this.encuesta.comentario)return;let t=yield this.service.guardarEncuesta(this.encuesta);this.dialogRef.close(t)})}static \u0275fac=function(e){return new(e||i)(f(Re),f(ve),f(Se))};static \u0275cmp=v({type:i,selectors:[["app-modal-encuesta"]],decls:23,vars:8,consts:[["mat-dialog-title",""],["appearance","outline",1,"full-width"],[3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"ngModelChange","ngModel","readonly"],["value","S\xED"],["value","No"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){e&1&&(a(0,"h2",0),r(1,"Encuesta de Satisfacci\xF3n"),o(),a(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),r(5,"\xBFC\xF3mo calificar\xEDas el ambiente de la cl\xEDnica?"),o(),a(6,"mat-select",2),x("ngModelChange",function(c){return M(n.encuesta.ambiente,c)||(n.encuesta.ambiente=c),c}),d(7,pt,2,2,"mat-option",3),o()(),a(8,"mat-form-field",1)(9,"mat-label"),r(10,"Escribe un comentario"),o(),a(11,"textarea",4),x("ngModelChange",function(c){return M(n.encuesta.comentario,c)||(n.encuesta.comentario=c),c}),o()(),a(12,"mat-label"),r(13,"\xBFVolver\xEDas a atenderte?"),o(),a(14,"mat-radio-group",2),x("ngModelChange",function(c){return M(n.encuesta.volveria,c)||(n.encuesta.volveria=c),c}),a(15,"mat-radio-button",5),r(16,"S\xED"),o(),a(17,"mat-radio-button",6),r(18,"No"),o()()(),a(19,"mat-dialog-actions",7)(20,"button",8),r(21,"Cerrar"),o(),d(22,dt,2,0,"button",9),o()),e&2&&(l(6),b("ngModel",n.encuesta.ambiente),m("disabled",n.modoVisualizacion),l(),m("ngForOf",n.opciones),l(4),b("ngModel",n.encuesta.comentario),m("readonly",n.modoVisualizacion),l(3),b("ngModel",n.encuesta.volveria),m("disabled",n.modoVisualizacion),l(8),m("ngIf",!n.modoVisualizacion))},dependencies:[E,Ae,Ne,Q,j,R,F,be,Me,Te,xe,ie,te,I,K,A,N,Z,T],encapsulation:2})};function ut(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F4C5} Fecha Solicitud"),o())}function ft(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit,n=p();l(),S(n.formatearFecha(e.fechaSolicictado))}}function _t(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F4AC} Mensaje"),o())}function gt(i,t){i&1&&(a(0,"td",23),r(1,"Se solicita un nuevo turno"),o())}function ht(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F553} Fecha Turno"),o())}function Ct(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit;l(),k("",e.fechaTurno," ",e.hora,"")}}function vt(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F464} Especialista"),o())}function St(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit;l(),k("",e.especialistaNombre," ",e.especialistaApellido,"")}}function bt(i,t){i&1&&(a(0,"th",22),r(1,"\u{1FA7A} Especialidad"),o())}function Mt(i,t){if(i&1&&(a(0,"td",23),r(1),o()),i&2){let e=t.$implicit;l(),S(e.especialidad)}}function xt(i,t){i&1&&(a(0,"th",22),r(1,"\u{1F4CC} Estado"),o())}function Tt(i,t){if(i&1&&(a(0,"td",23)(1,"span",24),r(2),J(3,"titlecase"),o()()),i&2){let e=t.$implicit;l(),m("ngClass",e.estado),l(),S(Y(3,2,e.estado))}}function Et(i,t){i&1&&(a(0,"th",22),r(1,"\u2699 Acciones"),o())}function Dt(i,t){if(i&1){let e=h();a(0,"button",6),u("click",function(){_(e);let s=p().$implicit,c=p();return g(c.abrirDialogoCancelar(s))}),r(1," Cancelar "),o()}}function yt(i,t){if(i&1){let e=h();a(0,"button",4),u("click",function(){_(e);let s=p().$implicit,c=p();return g(c.verMotivo(s))}),r(1," Motivo "),o()}}function wt(i,t){if(i&1){let e=h();a(0,"button",5),u("click",function(){_(e);let s=p().$implicit,c=p();return g(c.completarEncuesta(s))}),r(1," Completar Encuesta "),o()}}function Pt(i,t){if(i&1){let e=h();a(0,"button",5),u("click",function(){_(e);let s=p().$implicit,c=p();return g(c.calificarAtencion(s))}),r(1," Calificar Atenci\xF3n "),o()}}function It(i,t){if(i&1){let e=h();a(0,"button",5),u("click",function(){_(e);let s=p().$implicit,c=p();return g(c.verResena(s))}),r(1," Ver rese\xF1a "),o()}}function Ft(i,t){if(i&1&&(a(0,"td",23),d(1,Dt,2,0,"button",25)(2,yt,2,0,"button",26)(3,wt,2,0,"button",27)(4,Pt,2,0,"button",27)(5,It,2,0,"button",27),o()),i&2){let e=t.$implicit;l(),m("ngIf",e.estado!=="realizado"&&e.estado!=="cancelado"&&e.estado!=="rechazado"),l(),m("ngIf",e.comentarioCancelacion),l(),m("ngIf",e.estado==="realizado"&&e.resenaEspecialista&&!e.encuestaPaciente),l(),m("ngIf",e.estado==="realizado"&&!e.calificacionPaciente),l(),m("ngIf",e.estado==="realizado"&&e.resenaEspecialista)}}function Ot(i,t){i&1&&D(0,"tr",28)}function kt(i,t){i&1&&D(0,"tr",29)}var le=class i{constructor(t,e,n,s){this.turnoService=t;this.toast=e;this.dialog=n;this.auth=s}turnos=[];turnosFiltrados=[];estadoSeleccionado="activos";uidPacienteActual="VXd9ZZMGAue9mmcToYjlNJ3k51a2";columnas=["fechaSolicitado","mensaje","fechaTurno","especialista","especialidad","estado","acciones"];busqueda="";usuario;ngOnInit(){this.auth.usuario$.subscribe(t=>{t?this.usuario=t:this.usuario={rol:"no-registrado"}}),this.turnoService.obtenerTurnosPorPaciente(this.usuario.uid).subscribe(t=>{this.turnos=t,console.log("lista de turnos"),console.log(t),this.filtrar("activos")})}filtrar(t){this.estadoSeleccionado=t,this.aplicarFiltro()}aplicarFiltro(){let t=this.turnos.filter(e=>this.estadoSeleccionado==="activos"?e.estado==="pendiente"||e.estado==="aceptado":this.estadoSeleccionado==="cancelado"?e.estado==="cancelado"||e.estado==="rechazado":e.estado===this.estadoSeleccionado);if(this.busqueda.trim()){let e=this.busqueda.toLowerCase();t=t.filter(n=>(n.especialistaNombre+" "+n.especialistaApellido).toLowerCase().includes(e)||n.especialidad.toLowerCase().includes(e))}this.turnosFiltrados=t}cancelar(t){}abrirDialogoCancelar(t){this.dialog.open(ze,{width:"400px",data:{titulo:"Cancelar Turno",nombre:`${t.pacienteNombre} ${t.pacienteApellido} (${this.usuario.rol})`}}).afterClosed().subscribe(n=>{if(n){let s=t.pacienteNombre+"@"+t.pacienteApellido+"@"+this.usuario.rol+"@"+n;this.turnoService.cancelarTurno(t,s),console.log("Motivo ingresado:",n)}})}abrirDialogoCancelar2(t){let e=prompt("Ingrese un comentario del porqu\xE9 cancela el turno:");e&&this.turnoService.cancelarTurno(t,e)}verMotivo(t){this.dialog.open(He,{width:"400px",data:{comentario:t.comentarioCancelacion}})}verResena(t){if(!t.resenaEspecialista){this.toast.mostrarMensaje("Este turno no tiene rese\xF1a registrada","Rese\xF1a","info");return}let e=this.dialog.open(je,{width:"500px",data:{modo:"ver",id:t.resenaEspecialista},disableClose:!0})}completarEncuesta(t){this.dialog.open($,{data:{modo:"crear"},width:"500px",disableClose:!0}).afterClosed().subscribe(n=>{n&&this.turnoService.encuestaAtencion(t,n)})}verEncuesta(t){if(!t.encuestaPaciente){this.toast.mostrarMensaje("Este turno no tiene encuesta registrada","Encuesta","info");return}this.dialog.open($,{width:"500px",data:{modo:"ver",id:t.encuestaPaciente}})}calificarAtencion(t){this.dialog.open(Le,{data:{modo:"crear"},width:"500px",disableClose:!0}).afterClosed().subscribe(n=>{n&&this.turnoService.calificarAtencion(t,n)})}formatearFecha(t){let e=t.toDate(),n=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),c=e.getFullYear();return`${n}/${s}/${c}`}static \u0275fac=function(e){return new(e||i)(f(re),f(ae),f(ee),f(H))};static \u0275cmp=v({type:i,selectors:[["app-mis-turnos"]],decls:39,vars:10,consts:[[1,"contenedor-turnos"],[1,"card-turnos"],[1,"header-filtros"],[1,"botones"],["mat-button","","color","primary",3,"click"],["mat-button","","color","accent",3,"click"],["mat-button","","color","warn",3,"click"],["appearance","outline",1,"buscador"],["matInput","",3,"ngModelChange","input","ngModel"],[1,"tabla-scroll"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","fechaSolicitado"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","mensaje"],["matColumnDef","fechaTurno"],["matColumnDef","especialista"],["matColumnDef","especialidad"],["matColumnDef","estado"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"estado",3,"ngClass"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","accent",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(e,n){e&1&&(a(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"div",3)(4,"button",4),u("click",function(){return n.filtrar("activos")}),r(5," \u{1F552} Pendientes / Aceptados "),o(),a(6,"button",5),u("click",function(){return n.filtrar("realizado")}),r(7," \u2714 Realizados "),o(),a(8,"button",6),u("click",function(){return n.filtrar("cancelado")}),r(9," \u274C Cancelados / Rechazados "),o()(),a(10,"mat-form-field",7)(11,"mat-label"),r(12,"Buscar especialista o especialidad"),o(),a(13,"input",8),x("ngModelChange",function(c){return M(n.busqueda,c)||(n.busqueda=c),c}),u("input",function(){return n.aplicarFiltro()}),o()()(),a(14,"div",9)(15,"table",10),y(16,11),d(17,ut,2,0,"th",12)(18,ft,2,1,"td",13),w(),y(19,14),d(20,_t,2,0,"th",12)(21,gt,2,0,"td",13),w(),y(22,15),d(23,ht,2,0,"th",12)(24,Ct,2,2,"td",13),w(),y(25,16),d(26,vt,2,0,"th",12)(27,St,2,2,"td",13),w(),y(28,17),d(29,bt,2,0,"th",12)(30,Mt,2,1,"td",13),w(),y(31,18),d(32,xt,2,0,"th",12)(33,Tt,4,4,"td",13),w(),y(34,19),d(35,Et,2,0,"th",12)(36,Ft,6,5,"td",13),w(),d(37,Ot,1,0,"tr",20)(38,kt,1,0,"tr",21),o()()()()),e&2&&(l(4),O("activo",n.estadoSeleccionado==="activos"),l(2),O("activo",n.estadoSeleccionado==="realizado"),l(2),O("activo",n.estadoSeleccionado==="cancelado"),l(5),b("ngModel",n.busqueda),l(2),m("dataSource",n.turnosFiltrados),l(22),m("matHeaderRowDef",n.columnas),l(),m("matRowDefColumns",n.columnas))},dependencies:[ge,T,X,I,K,A,N,E,Q,j,R,F,L,Ee,ye,Fe,we,De,Oe,Pe,Ie,ke,Ve],styles:[".contenedor-turnos[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px}.card-turnos[_ngcontent-%COMP%]{width:100%;max-width:1000px;padding:20px}.header-filtros[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:15px;margin-bottom:20px}.buscador[_ngcontent-%COMP%]{flex:1;min-width:250px}.botones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.botones[_ngcontent-%COMP%]   button.activo[_ngcontent-%COMP%]{font-weight:700;border-bottom:2px solid currentColor}.tabla-scroll[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border-radius:8px}"]})};function At(i,t){i&1&&D(0,"app-solicitar-turno")}function Nt(i,t){i&1&&D(0,"app-mis-turnos")}var ce=class i{vistaSeleccionada="solicitar";seleccionarVista(t){this.vistaSeleccionada=t}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-home-paciente"]],decls:17,vars:6,consts:[[1,"header-turnos"],[1,"selector-vista"],[3,"click"],[1,"vista-contenido"],[4,"ngIf"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h1"),r(2,"Mis Turnos"),o(),a(3,"p"),r(4,"Gestiona tus turnos m\xE9dicos"),o(),a(5,"div",1)(6,"button",2),u("click",function(){return n.seleccionarVista("solicitar")}),a(7,"mat-icon"),r(8,"event_available"),o(),r(9," Solicitar turno "),o(),a(10,"button",2),u("click",function(){return n.seleccionarVista("ver")}),a(11,"mat-icon"),r(12,"format_list_bulleted"),o(),r(13," Ver turnos "),o()()(),a(14,"div",3),d(15,At,1,0,"app-solicitar-turno",4)(16,Nt,1,0,"app-mis-turnos",4),o()),e&2&&(l(6),O("activo",n.vistaSeleccionada==="solicitar"),l(4),O("activo",n.vistaSeleccionada==="ver"),l(5),m("ngIf",n.vistaSeleccionada==="solicitar"),l(),m("ngIf",n.vistaSeleccionada==="ver"))},dependencies:[z,le,E,ne,T],styles:[".header-turnos[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.header-turnos[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:0;color:#fff}.header-turnos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#eee;font-size:1rem;margin-top:5px}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]{margin-top:20px;display:inline-flex;background:#3b5bdb;border-radius:12px;overflow:hidden;box-shadow:0 2px 10px #0003}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:transparent;color:#fff;border:none;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .3s}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button.activo[_ngcontent-%COMP%]{background:#fff;color:#1c3faa}.header-turnos[_ngcontent-%COMP%]   .selector-vista[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}"]})};function Rt(i,t){if(i&1&&(a(0,"div",8)(1,"mat-icon"),r(2,"badge"),o(),a(3,"span"),r(4),o()()),i&2){let e=p();l(4),P("DNI: ",e.usuario==null?null:e.usuario.dni,"")}}function jt(i,t){if(i&1&&(a(0,"div",8)(1,"mat-icon"),r(2,"calendar_today"),o(),a(3,"span"),r(4),o()()),i&2){let e=p();l(4),P("Edad: ",e.usuario==null?null:e.usuario.edad,"")}}function Lt(i,t){if(i&1&&(a(0,"section",6)(1,"h3")(2,"mat-icon"),r(3,"medical_services"),o(),r(4," Obra Social"),o(),a(5,"p"),r(6),o()()),i&2){let e=p();l(6),S(e.usuario==null?null:e.usuario.obraSocial)}}var me=class i{constructor(t,e,n,s,c){this.auth=t;this.historialMedica=e;this.dialog=n;this.pdf=s;this.usuarioService=c}usuario;ngOnInit(){return C(this,null,function*(){let t=yield this.auth.obtenerSesion();t&&(this.usuario=yield this.usuarioService.obtenerUsuario(t.uid))})}generarPDF(){return C(this,null,function*(){this.dialog.open(Ue,{data:{uid:this.usuario.uid},width:"600px"})})}static \u0275fac=function(e){return new(e||i)(f(H),f(We),f(ee),f(Be),f(oe))};static \u0275cmp=v({type:i,selectors:[["app-mi-perfil-paciente"]],decls:29,vars:11,consts:[[1,"perfil-facebook"],[1,"portada-container"],["alt","Foto de portada",1,"foto-portada",3,"src"],["alt","Foto de perfil",1,"foto-perfil-superpuesta",3,"src"],[1,"contenido-perfil"],[1,"nombre-usuario"],[1,"seccion-info"],["class","info-item",4,"ngIf"],[1,"info-item"],["class","seccion-info",4,"ngIf"],["mat-raised-button","","color","blue",3,"click"]],template:function(e,n){e&1&&(a(0,"mat-card",0)(1,"div",1),D(2,"img",2)(3,"img",3),o(),a(4,"mat-card-content",4),D(5,"br"),a(6,"h2",5),r(7),o(),a(8,"section",6)(9,"h3")(10,"mat-icon"),r(11,"person"),o(),r(12," Datos personales"),o(),d(13,Rt,5,1,"div",7)(14,jt,5,1,"div",7),a(15,"div",8)(16,"mat-icon"),r(17,"mail"),o(),a(18,"span"),r(19),o()(),a(20,"div",8)(21,"mat-icon"),r(22,"verified_user"),o(),a(23,"span"),r(24),J(25,"titlecase"),o()()(),d(26,Lt,7,1,"section",9),a(27,"button",10),u("click",function(){return n.generarPDF()}),r(28,"Descargar historial Clinica"),o()()()),e&2&&(l(2),m("src",n.usuario==null?null:n.usuario.imagen2Url,de),l(),m("src",n.usuario==null?null:n.usuario.imagenUrl,de),l(4),k("",n.usuario==null?null:n.usuario.nombre," ",n.usuario==null?null:n.usuario.apellido,""),l(6),m("ngIf",n.usuario==null?null:n.usuario.dni),l(),m("ngIf",n.usuario==null?null:n.usuario.edad),l(5),P("Email: ",n.usuario==null?null:n.usuario.email,""),l(5),P("Rol: ",Y(25,9,n.usuario==null?null:n.usuario.rol),""),l(2),m("ngIf",n.usuario==null?null:n.usuario.obraSocial))},dependencies:[E,F,L,Ce,ne,T,I,X],styles:[".perfil-facebook[_ngcontent-%COMP%]{max-width:650px;margin:auto;overflow:hidden;padding:0;border-radius:12px}.portada-container[_ngcontent-%COMP%]{position:relative;height:200px}.foto-portada[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.foto-perfil-superpuesta[_ngcontent-%COMP%]{position:absolute;bottom:-50px;left:50%;transform:translate(-50%);border:4px solid white;border-radius:50%;width:100px;height:100px;object-fit:cover;background-color:#fff}.contenido-perfil[_ngcontent-%COMP%]{padding-top:60px;padding:1rem;text-align:left}.nombre-usuario[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.seccion-info[_ngcontent-%COMP%]{margin-top:1rem}.seccion-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1a237e;display:flex;align-items:center;gap:6px;margin-bottom:10px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:6px 0;color:#333;font-size:.95rem}mat-icon[_ngcontent-%COMP%]{color:#1a73e8}"]})};var Ht=[{path:"",component:ce},{path:"perfil",component:me},{path:"solicitar-turno",component:z}],pe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=G({type:i});static \u0275inj=q({imports:[ue.forChild(Ht),ue]})};var Ze=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=G({type:i});static \u0275inj=q({imports:[he,pe]})};export{Ze as PacienteModule};
